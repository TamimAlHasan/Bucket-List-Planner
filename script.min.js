'use strict';

const taskInput = document.querySelector(".task-input");
const addBtn = document.querySelector(".plus-button");
const taskList = document.querySelector(".task-list");


// addButton.addEventListener("click", function (event) {
//     event.preventDefault();
//     console.log("button clicked");
// })

//...Button Events
addBtn.addEventListener("click", addTaskToList);
taskList.addEventListener("click", checkOrTrash);

//...Functions
function addTaskToList(event) {
    event.preventDefault(); //auto refresh off

    //capture user input
    const task = taskInput.value;

    if (task == "") {
        alert("Please add a task");
    }
    else {
        //remove task from input
        taskInput.value = "";

        //create a div
        const taskDiv = document.createElement("div");
        //assign class to the div
        taskDiv.classList.add("task");

        //create list
        const taskItem = document.createElement("li");
        taskItem.classList.add("task-item");

        //add task to list
        taskItem.innerText = task;

        //attach list to the div & div to ul list
        taskDiv.appendChild(taskItem);
        taskList.appendChild(taskDiv);

        //add buttons to the list
        const checkBtn = document.createElement("button");
        checkBtn.classList.add("check");
        checkBtn.innerHTML = `<i class="fas fa-check"></i>`;
        taskDiv.appendChild(checkBtn);

        const trashBtn = document.createElement("button");
        trashBtn.classList.add("trash");
        trashBtn.innerHTML = `<i class="fas fa-trash"></i>`;
        taskDiv.appendChild(trashBtn);
    }
}

function checkOrTrash(event) {
    const item = event.target; //where the click is
    console.log(item);
    //delete task
    if (item.classList[0] == "trash") {
        const task = item.parentElement;
        task.classList.add("delete");
        task.addEventListener("transitionend", function () {
            task.remove();
        })
    }
    else if (item.classList[0] == "check") {
        const task = item.parentElement;
        task.classList.add("complete");
        item.remove();
    }
}